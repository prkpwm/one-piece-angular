<div class="app">
  <header class="header">
    <h1>One Piece Episodes</h1>
    <div class="controls">
      <input [(ngModel)]="searchTerm" (input)="filterEpisodes()" placeholder="Search episodes...">
      <select class="page-size-select" [(ngModel)]="itemsPerPage" (change)="changePageSize()">
        <option value="25">25</option>
        <option value="50">50</option>
        <option value="100">100</option>
        <option value="200">200</option>
      </select>
      <button class="hide-seen-btn" (click)="toggleSeenEpisodes()" [class.active]="hideSeenEpisodes">
        <span class="desktop-text">{{hideSeenEpisodes ? 'Show Watched' : 'Hide Watched'}}</span>
        <span class="mobile-text">{{hideSeenEpisodes ? 'ðŸ‘»' : 'ðŸ”¥'}}</span>
      </button>
    </div>
  </header>
  
  <main class="main">
    <div class="episodes-grid">
      <div *ngFor="let episode of paginatedEpisodes" class="episode-card" [class.seen]="episode.seen" (click)="playEpisode(episode)">
        <div class="episode-image">
          <img [src]="episode.imageUrl" [alt]="'Episode ' + episode.number" loading="lazy" crossorigin="anonymous" referrerpolicy="no-referrer">
          <div class="play-overlay">
            <div class="play-button">â–¶</div>
          </div>
        </div>
        <div class="episode-info">
          <h3>EP {{episode.number.toString().padStart(3, '0')}}</h3>
          <p>{{episode.title}}</p>
        </div>
      </div>
    </div>
    
    <div class="pagination" *ngIf="totalPages > 1">
      <button (click)="prevPage()" [disabled]="currentPage === 1">â€¹</button>
      <span class="page-info">{{currentPage}} / {{totalPages}}</span>
      <button (click)="nextPage()" [disabled]="currentPage === totalPages">â€º</button>
    </div>
  </main>

  <footer class="footer">
    <div class="skip-section">
      <h3>Season</h3>
      <div class="arc-buttons">
        <button (click)="showAllEpisodes()" class="all-btn" [class.active]="activeArc === null">Show All</button>
        <button (click)="skipToSeason('East Blue')" [class.active]="activeArc === 'East Blue'">East Blue</button>
        <button (click)="skipToSeason('Entering the Grand Line')" [class.active]="activeArc === 'Entering the Grand Line'">Grand Line</button>
        <button (click)="skipToSeason('Drum Island (Snow Island)')" [class.active]="activeArc === 'Drum Island (Snow Island)'">Drum Island</button>
        <button (click)="skipToSeason('Alabasta')" [class.active]="activeArc === 'Alabasta'">Alabasta</button>
        <button (click)="skipToSeason('Rainbow Arc (Filler)')" [class.active]="activeArc === 'Rainbow Arc (Filler)'">Rainbow Arc</button>
        <button (click)="skipToSeason('Skypiea (Sky Island)')" [class.active]="activeArc === 'Skypiea (Sky Island)'">Skypiea</button>
        <button (click)="skipToSeason('G-8 & Davy Back Fight')" [class.active]="activeArc === 'G-8 & Davy Back Fight'">G-8 & Davy Back</button>
        <button (click)="skipToSeason('Water Seven')" [class.active]="activeArc === 'Water Seven'">Water 7</button>
        <button (click)="skipToSeason('Enies Lobby')" [class.active]="activeArc === 'Enies Lobby'">Enies Lobby</button>
        <button (click)="skipToSeason('Thriller Bark')" [class.active]="activeArc === 'Thriller Bark'">Thriller Bark</button>
        <button (click)="skipToSeason('Sabaody Archipelago')" [class.active]="activeArc === 'Sabaody Archipelago'">Sabaody</button>
        <button (click)="skipToSeason('Amazon Lily')" [class.active]="activeArc === 'Amazon Lily'">Amazon Lily</button>
        <button (click)="skipToSeason('Impel Down')" [class.active]="activeArc === 'Impel Down'">Impel Down</button>
        <button (click)="skipToSeason('Marineford War')" [class.active]="activeArc === 'Marineford War'">Marineford</button>
        <button (click)="skipToSeason('Fish-Man Island')" [class.active]="activeArc === 'Fish-Man Island'">Fish-Man Island</button>
        <button (click)="skipToSeason('Punk Hazard')" [class.active]="activeArc === 'Punk Hazard'">Punk Hazard</button>
        <button (click)="skipToSeason('Dressrosa')" [class.active]="activeArc === 'Dressrosa'">Dressrosa</button>
        <button (click)="skipToSeason('Zou')" [class.active]="activeArc === 'Zou'">Zou</button>
        <button (click)="skipToSeason('Whole Cake Island')" [class.active]="activeArc === 'Whole Cake Island'">Whole Cake</button>
        <button (click)="skipToSeason('Wano Country')" [class.active]="activeArc === 'Wano Country'">Wano</button>
        <button (click)="skipToSeason('Egghead Island (Future Island Arc)')" [class.active]="activeArc === 'Egghead Island (Future Island Arc)'">Egghead Island</button>
        <button (click)="skipToSeason('Egghead Incident / CP0')" [class.active]="activeArc === 'Egghead Incident / CP0'">Egghead Incident</button>
        <button (click)="skipToSeason('World in Chaos (Reverie Aftermath)')" [class.active]="activeArc === 'World in Chaos (Reverie Aftermath)'">World in Chaos</button>
        <button (click)="skipToSeason('Yonko & Final Saga Setup')" [class.active]="activeArc === 'Yonko & Final Saga Setup'">Final Saga</button>
      </div>
    </div>
  </footer>

</div>